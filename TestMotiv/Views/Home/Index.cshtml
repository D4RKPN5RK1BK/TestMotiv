@using TestMotiv.DTO;
@using TestMotiv.Models;
@using TestMotiv.ViewModels;
@model PageView<SubscriberRequestDto, SubscriberRequestFilterDto>

<h2>Обращения абонентов</h2>
<div class="row mt-3">
    <div class="col-sm-3">
        <form action="">
            <div class="form-group">
                @Html.LabelFor(i => i.Filter.CountryId)
                <input type="text" class="form-control">
            </div>
            <div class="form-group">
                @Html.LabelFor(i => i.Filter.RegionId)
                <input type="text" class="form-control">
            </div>
            <div class="form-group">
                @Html.LabelFor(i => i.Filter.CityId)
                <input type="text" class="form-control">
            </div>
            <div class="form-group">
                @Html.LabelFor(i => i.Filter.Phone)
                <input type="text" class="form-control">
            </div>
            <div class="form-group">
                @Html.LabelFor(i => i.Filter.RequestReasonId)
                <input type="text" class="form-control">
            </div>
            <div class="form-group">
                <input type="submit" value="Отфильтровать" class="form-control">
            </div>
        </form>
        <div class="form-group">
            <div class="btn btn-success btn-block">Добавить</div>
        </div>
    </div>

    @Html.Partial("Components/Pagination", new PaginationViewModel
    {
        Total = Model.Total,
        CurrentPage = Model?.Filter?.PageRequest?.CurrentPage ?? 0,
        PageSize = Model?.Filter?.PageRequest?.PageSize ?? 0,
        UrlParams = new Dictionary<string, string>
        {
            {nameof(Model.Filter.Phone), Model?.Filter?.Phone ?? string.Empty},
            {nameof(Model.Filter.CountryId), Model?.Filter?.CountryId.ToString()},
            {nameof(Model.Filter.CityId), Model?.Filter?.CityId.ToString()},
            {nameof(Model.Filter.RegionId), Model?.Filter?.RegionId.ToString()},
            {nameof(Model.Filter.RequestReasonId), Model?.Filter?.RequestReasonId.ToString()},
        }
    })

    <div class="col-sm-9">
        <table class="table">
            <thead>
            <tr>
                <th>Страна</th>
                <th>Регион</th>
                <th>Населенный пункт</th>
                <th>Номер абонента</th>
                <th>Причина обращения</th>
                <th></th>
                <th></th>
            </tr>
            </thead>
            @foreach (var item in Model.Items)
            {
                <tr>
                    <td>@item.CountryName</td>
                    <td>@item.RegionName</td>
                    <td>@item.CityName</td>
                    <td>@item.Phone</td>
                    <td>@item.RequestReasonName</td>
                    <td>
                        <div class="btn btn-primary">Изменить</div>
                    </td>
                    <td>
                        <div class="btn btn-danger">Удалить</div>
                    </td>
                </tr>
            }
        </table>
    </div>
</div>

@section scripts
{
    <script >
        
    </script>
}
