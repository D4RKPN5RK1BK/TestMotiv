@using TestMotiv.DTO

@model PageResultDto<SubscriberRequestFilterDto, SubscriberRequestDto>

<h2>Обращения абонентов</h2>
<div class="row">
    <div class="col-sm-3">
        <form method="get">
            @Html.HiddenFor(i => i.PageData.CurrentPage)
            @Html.HiddenFor(i => i.PageData.PageSize)
            <div class="form-group">
                @Html.LabelFor(i => i.Filter.CountryId)
                @* @Html.DropDownListFor(i => i.Filter.CountryId,  new SelectList(new List<(int Id, string Name)> *@
                @*                       { *@
                @*                           (1, "Раз"), *@
                @*                           (2, "Два"), *@
                @*                           (3, "Три"), *@
                @*                       }, "Id", "Name")) *@
            </div>
            <div class="form-group">
                @Html.LabelFor(i => i.Filter.RegionId)
                @Html. <input type="text" class="form-control">
            </div>
            <div class="form-group">
                @Html.LabelFor(i => i.Filter.CityId)
                <input type="text" class="form-control">
            </div>
            <div class="form-group">
                @Html.LabelFor(i => i.Filter.Phone)
                <input type="text" class="form-control">
            </div>
            <div class="form-group">
                @Html.LabelFor(i => i.Filter.RequestReasonId)
                <input type="text" class="form-control">
            </div>
            <div class="form-group">
                <input type="submit" value="Отфильтровать" class="form-control">
            </div>
        </form>
        @Html.ActionLink("Добавить", "Create", "SubscriberRequest", null, new {@class = "btn btn-success btn-block"})
    </div>
    <div class="col-sm-9">
        @Html.Partial("Components/Pagination", new PaginationDto
            {
                Total = Model.Total,
                PageData = Model.PageData,
                FilterDict = new Dictionary<string, string>
                {
                    {nameof(Model.Filter.Phone), Model?.Filter?.Phone ?? string.Empty},
                    {nameof(Model.Filter.CountryId), Model?.Filter?.CountryId.ToString()},
                    {nameof(Model.Filter.CityId), Model?.Filter?.CityId.ToString()},
                    {nameof(Model.Filter.RegionId), Model?.Filter?.RegionId.ToString()},
                    {nameof(Model.Filter.RequestReasonId), Model?.Filter?.RequestReasonId.ToString()},
                }
            })
        <table class="table">
            <thead>
            <tr>
                <th>Страна</th>
                <th>Регион</th>
                <th>Населенный пункт</th>
                <th>Номер абонента</th>
                <th>Причина обращения</th>
                <th></th>
                <th></th>
            </tr>
            </thead>
            @foreach (var item in Model.Items)
            {
                <tr>
                    <td>@item.CountryName</td>
                    <td>@item.RegionName</td>
                    <td>@item.CityName</td>
                    <td>@item.Phone</td>
                    <td>@item.RequestReasonName</td>
                    <td>
                         @Html.ActionLink("Изменить", "Update", "SubscriberRequest", new {id = item.Id}, new {@class = "btn btn-primary btn-block"})
                    </td>
                    <td>
                        <div class="btn btn-danger">Удалить</div>
                    </td>
                </tr>
            }
        </table>
    </div>
</div>

@section scripts
{
    <script >
        
    </script>
}
